{%extends 'base.html'%}
<hr />
{% block title%} | Books {% endblock title%}
<hr />
{% block mainContent%}

<table class="table table-striped table-responsive">
  <thead class="position-sticky top-0">
    <tr>
      <th>#</th>
      <th>Id</th>
      <th>Title</th>
      <th>Subtitle</th>
      <th>Author</th>
      <th>Publisher</th>
      <th>Published_date</th>
      <th>Category</th>

      <th title="distribution expense ">Expense</th>

      <th colspan="4">
        <a
          class="btn btn-outline-primary rounded-0 p-1"
          href="{%url 'add_book'%}"
        >
          <i class="fa-solid fa-file-circle-plus px-1"></i>Add Books
        </a>
      </th>
    </tr>
  </thead>
  <tbody>
    {%for book in books%}
    <tr>
      <td>{{forloop.counter}}</td>
      <td>{{book.idNumber}}</td>
      <td>{{book.title}}</td>
      <td>{{book.subtitle}}</td>
      <td>{{book.author}}</td>
      <td>{{book.publisher}}</td>
      <td>{{book.published_date}}</td>
      <td>{{book.category.type_name}}</td>
      <td>{{book.distribution_expense}}</td>

      <td colspan="2">
        <a href="{%url 'editBook' book.id %}">
          <i class="fa-solid fa-pencil px-3"></i>
        </a>
      </td>
      <td>
        <a href="{%url 'deleteBook' book.id %}">
          <i class="fa-solid fa-trash px-3"></i>
        </a>
      </td>
    </tr>
    {%endfor%}
  </tbody>
</table>

<nav aria-label="Page  navigation  position-sticky top-0">
  <ul class="pagination justify-content-end">
    {% if books.has_previous %}
    <li class="page-item">
      <a href="?page={{  books.previous_page_number }}" class="page-link"
        >Previous</a
      >
    </li>

    {% endif %} {% for i in books.paginator.page_range %}
    <!--  -->
    {% if books.number == i%}
    <li class="page-item acvive">
      <a class="page-link active" href="#">{{i}}</a>
    </li>
    {%elif books.number == i|add:"1" %}
    <li class="page-item">
      <a class="page-link" href="?page={{ i }}">{{i}}</a>
    </li>
    {%elif books.number == i|add:"2" %}
    <li class="page-item">
      <a class="page-link" href="?page={{ i }}">{{i}}</a>
    </li>

    {%elif books.number == i|add:"-1" %}
    <li class="page-item">
      <a class="page-link" href="?page={{ i }}">{{i}}</a>
    </li>

    {%elif books.number == i|add:"-2" %}
    <li class="page-item">
      <a class="page-link" href="?page={{ i }}">{{i}}</a>
    </li>

    {% endif %} {% endfor %}
    <li class="page-item">
      <a href="?page={{  books.last_page_number }}" class="page-link"
        >{{ books.last_page_number }}</a
      >
    </li>

    <li class="page-item {% if not books.has_next %} disabled {% endif %}">
      <a href="?page={{ books.next_page_number }}" class="page-link">Next</a>
    </li>
  </ul>
</nav>

{% endblock mainContent%}
